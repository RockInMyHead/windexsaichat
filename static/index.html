<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WindexsAI - –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</title>
    <link rel="icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/style.css?v=20251027-01">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- KaTeX CSS –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
</head>
<body>
    <div class="app">
        <!-- Auth Modal -->
        <div id="auth-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header text-center mb-6">
                    <div class="logo d-flex align-items-center justify-content-center gap-3 mb-4">
                        <img src="/static/round_logo-07.svg" alt="WindexsAI" width="32" height="32">
                        <h1 class="gradient-text">WIndexsAi</h1>
                    </div>
                    <p class="text-muted">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</p>
                </div>

                <!-- Login Form -->
                <div id="login-form" class="auth-form">
                    <h2 class="text-center mb-4">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                    <form id="login-form-element">
                        <div class="form-group">
                            <label for="login-email" class="form-label">Email</label>
                            <input type="email" id="login-email" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="login-password" class="form-input" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-3">–í–æ–π—Ç–∏</button>
                    </form>
                    <p class="auth-switch">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register" class="text-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                    </p>
                </div>

                <!-- Register Form -->
                <div id="register-form" class="auth-form hidden">
                    <h2 class="text-center mb-4">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <form id="register-form-element">
                        <div class="form-group">
                            <label for="register-username" class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="register-username" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="register-email" class="form-label">Email</label>
                            <input type="email" id="register-email" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="register-password" class="form-input" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-3">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    </form>
                    <p class="auth-switch">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login" class="text-primary">–í–æ–π—Ç–∏</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Main App (hidden until authenticated) -->
        <div id="main-app" class="main-app hidden">
        <!-- –ï–¥–∏–Ω—ã–π –∫—Ä–∞—Å–∏–≤—ã–π —Ö–µ–¥–µ—Ä -->
        <header class="unified-header">
            <div class="header-container">
                <a href="/" class="header-logo">
                    <img src="/static/round_logo-07.svg" alt="WindexsAI" width="32" height="32">
                    <span class="logo-text">WindexsAI</span>
                </a>

                <nav class="header-nav">
                    <div class="nav-links">
                        <!-- <a href="/editor" class="nav-link">–°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–π—Ç–æ–≤</a> -->
                        <!-- <a href="/dashboard" class="nav-link">–ö–∞–±–∏–Ω–µ—Ç</a> -->
                    </div>
                </nav>

                <div class="header-actions">
                    <div class="user-info">
                        <div class="user-avatar" id="user-avatar">U</div>
                        <span class="user-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                    </div>
                </div>

                <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é –≤ –ø—Ä–∞–≤–æ–º —É–≥–ª—É -->
                <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Sidebar Overlay –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content -->
        <main class="main-content d-flex">
            <!-- Sidebar -->
            <aside class="sidebar card" id="sidebar">
                <div class="card-header">
                    <div class="d-flex align-items-center justify-content-between">
                        <h3 class="mb-0">–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤</h3>
                        <button id="clear-history-btn" class="btn btn-outline btn-sm">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
                <div class="card-body p-0">
                    <div id="conversations-list" class="conversations-list">
                        <!-- Conversations will be loaded here -->
                    </div>
                </div>
            </aside>

            <!-- Chat Area -->
            <section class="chat-area d-flex flex-column">
                <!-- Selected Model Info - Hidden -->
                <div id="selected-model" class="selected-model hidden" style="display: none !important;">
                    <div class="model-info">
                        <div class="model-icon" id="model-icon">L</div>
                        <div class="model-details">
                            <h4 id="model-name">WIndexsAi Lite</h4>
                            <p id="model-description">–ë—ã—Å—Ç—Ä–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á</p>
                        </div>
                    </div>
                </div>

                <div id="chat-container" class="chat-container flex-grow-1">
                    <!-- Welcome Message -->
                    <div id="welcome-message" class="welcome-message text-center fade-in">
                        <div class="welcome-icon mb-4"></div>
                        <h2 class="gradient-text mb-3">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ WIndexsAI</h2>
                        <p class="text-muted mb-5">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>

                        <!-- Classic Models Section -->
                        <div class="classic-models-section mb-5">
                            <h4 class="mb-3">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏</h4>
                            <div class="model-cards d-flex gap-4 justify-content-center">
                                <div class="model-card card" data-model="gpt-4o-mini">
                                    <div class="card-body text-center">
                                        <h3 class="mb-3">WindexsAI Lite</h3>
                                        <p class="text-muted mb-4">–ë—ã—Å—Ç—Ä–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á</p>
                                        <div class="capabilities d-flex flex-wrap gap-2 justify-content-center">
                                            <span class="capability btn btn-outline btn-sm">–¢–µ–∫—Å—Ç</span>
                                            <span class="capability btn btn-outline btn-sm">–ö–æ–¥</span>
                                            <span class="capability btn btn-outline btn-sm">–ê–Ω–∞–ª–∏–∑</span>
                                            <span class="capability btn btn-outline btn-sm">–ü–µ—Ä–µ–≤–æ–¥</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="model-card card pro-model" data-model="gpt-4o">
                                    <div class="pro-badge">–ü–æ–¥–ø–∏—Å–∫–∞ Pro</div>
                                    <div class="card-body text-center">
                                        <h3 class="mb-3">WindexsAI Pro</h3>
                                        <p class="text-muted mb-4">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏</p>
                                        <div class="capabilities d-flex flex-wrap gap-2 justify-content-center">
                                            <span class="capability btn btn-outline btn-sm">–¢–µ–∫—Å—Ç</span>
                                            <span class="capability btn btn-outline btn-sm">–ö–æ–¥</span>
                                            <span class="capability btn btn-outline btn-sm">–ê–Ω–∞–ª–∏–∑</span>
                                            <span class="capability btn btn-outline btn-sm">–ü–µ—Ä–µ–≤–æ–¥</span>
                                            <span class="capability btn btn-outline btn-sm">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                                            <span class="capability btn btn-outline btn-sm">–õ–æ–≥–∏–∫–∞</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="mb-3">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã</h4>
                        <p class="text-muted mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–¥–∞—á</p>

                        <!-- AI Specialists Gallery -->
                        <div class="ai-specialists-gallery">
                            <div class="specialists-container">
                                <button class="scroll-btn scroll-left" onclick="scrollSpecialists('left')">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="specialists-grid" id="specialistsGrid">
                                <!-- –ú–µ–Ω—Ç–æ—Ä -->
                                <div class="specialist-card card" data-specialist="mentor" data-model="gpt-4o">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3">üéì</div>
                                        <h3 class="mb-2">AI –ú–µ–Ω—Ç–æ—Ä</h3>
                                        <p class="text-muted mb-3">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫–∞—Ä—å–µ—Ä—ã</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–ö–∞—Ä—å–µ—Ä–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                                            <span class="skill-tag">–û–±—É—á–µ–Ω–∏–µ</span>
                                            <span class="skill-tag">–ú–æ—Ç–∏–≤–∞—Ü–∏—è</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –ü—Å–∏—Ö–æ–ª–æ–≥ -->
                                <div class="specialist-card card" data-specialist="psychologist" data-model="gpt-4o">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3">üß†</div>
                                        <h3 class="mb-2">AI –ü—Å–∏—Ö–æ–ª–æ–≥</h3>
                                        <p class="text-muted mb-3">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–°—Ç—Ä–µ—Å—Å-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç</span>
                                            <span class="skill-tag">–≠–º–æ—Ü–∏–∏</span>
                                            <span class="skill-tag">–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç -->
                                <div class="specialist-card card" data-specialist="programmer" data-model="gpt-4o">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3">üíª</div>
                                        <h3 class="mb-2">AI –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</h3>
                                        <p class="text-muted mb-3">–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ—à–µ–Ω–∏—è–º</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–ö–æ–¥–∏–Ω–≥</span>
                                            <span class="skill-tag">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</span>
                                            <span class="skill-tag">–û—Ç–ª–∞–¥–∫–∞</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –ë—É—Ö–≥–∞–ª—Ç–µ—Ä -->
                                <div class="specialist-card card" data-specialist="accountant" data-model="gpt-4o-mini">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3">üìä</div>
                                        <h3 class="mb-2">AI –ë—É—Ö–≥–∞–ª—Ç–µ—Ä</h3>
                                        <p class="text-muted mb-3">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∏ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —É—á–µ—Ç—É</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–§–∏–Ω–∞–Ω—Å—ã</span>
                                            <span class="skill-tag">–ù–∞–ª–æ–≥–∏</span>
                                            <span class="skill-tag">–û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫ -->
                                <div class="specialist-card card" data-specialist="analyst" data-model="gpt-4o">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3">üìà</div>
                                        <h3 class="mb-2">AI –ê–Ω–∞–ª–∏—Ç–∏–∫</h3>
                                        <p class="text-muted mb-3">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</span>
                                            <span class="skill-tag">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                                            <span class="skill-tag">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π -->
                                <div class="specialist-card card" data-specialist="general" data-model="gpt-4o-mini">
                                    <div class="card-body text-center">
                                        <div class="specialist-icon mb-3"></div>
                                        <h3 class="mb-2">–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π AI</h3>
                                        <p class="text-muted mb-3">–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–¥–∞—á</p>
                                        <div class="specialist-skills">
                                            <span class="skill-tag">–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã</span>
                                            <span class="skill-tag">–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</span>
                                            <span class="skill-tag">–ü–æ–º–æ—â—å</span>
                                        </div>
                                    </div>
                                </div>
                                </div>
                                <button class="scroll-btn scroll-right" onclick="scrollSpecialists('right')">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages -->
                    <div id="chat-messages" class="chat-messages hidden">
                        <!-- Messages will be added here dynamically -->
                    </div>


                    <!-- Document Upload Indicator -->
                    <div id="document-upload-indicator" class="document-upload-indicator hidden">
                        <div class="upload-content">
                            <div class="upload-icon">üìÑ</div>
                            <div class="upload-text">–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞...</div>
                            <div class="upload-progress">
                                <div class="progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="input-area card">
                    <div class="card-body">
                        <div class="input-container d-flex align-items-end gap-3">
                            <textarea
                                id="message-input"
                                class="form-input flex-grow-1"
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                                rows="1"
                                maxlength="12000"
                            ></textarea>
                            <input type="file" id="document-input" accept=".pdf,.docx,.doc,.txt,.csv,.rtf,.jpg,.jpeg,.png,.gif,.bmp,.tiff" style="display: none;">
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ —Å –≤—ã–¥–≤–∏–∂–Ω—ã–º –º–µ–Ω—é -->
                            <div class="dropdown-menu-container" style="position: relative !important; display: inline-block !important;">
                                <button id="tools-btn" class="btn btn-outline" title="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" style="position: relative; z-index: 100;">
                                    <span class="tools-text">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span>
                                    <span class="tools-icon">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14.7 6.3a1 1 0 0 0-1.4 0L10 9.58 8.7 8.3a1 1 0 0 0-1.4 0 1 1 0 0 0 0 1.4l2 2a1 1 0 0 0 1.4 0l4-4a1 1 0 0 0 0-1.4Z"></path>
                                            <path d="M14.7 12.3a1 1 0 0 0-1.4 0L10 15.58 8.7 14.3a1 1 0 0 0-1.4 0 1 1 0 0 0 0 1.4l2 2a1 1 0 0 0 1.4 0l4-4a1 1 0 0 0 0-1.4Z"></path>
                                            <path d="M20 4v16a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2Z"></path>
                                        </svg>
                                    </span>
                                </button>

                                <div id="tools-dropdown" class="tools-dropdown">
                                    <button id="document-btn" class="dropdown-item" onclick="handleDocument()" style="display: flex !important; align-items: center !important; gap: 10px !important; width: 100% !important; padding: 12px 16px !important; border: none !important; background: none !important; color: #333 !important; font-size: 14px !important; text-align: left !important; cursor: pointer !important; border-bottom: 1px solid #eee !important;">
                                        –î–æ–∫—É–º–µ–Ω—Ç
                            </button>

                                    <button id="connect-btn" class="dropdown-item" onclick="handleConnect()" style="display: flex !important; align-items: center !important; gap: 10px !important; width: 100% !important; padding: 12px 16px !important; border: none !important; background: none !important; color: #333 !important; font-size: 14px !important; text-align: left !important; cursor: pointer !important;">
                                        –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±–ª–∞–∫—É
                            </button>
                                </div>
                            </div>
                            
                            <!-- Voice Button -->
                            <button id="voice-btn" class="btn btn-outline" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                    <line x1="12" y1="19" x2="12" y2="22"></line>
                                    <line x1="8" y1="22" x2="16" y2="22"></line>
                                </svg>
                            </button>
                            <button id="send-btn" class="btn btn-primary btn-sm" disabled>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                            </button>
                        </div>
                        <div class="input-footer d-flex justify-content-between align-items-center mt-2">
                            <span class="char-count text-muted">0/12000</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-content text-center">
                <div class="loading-spinner mb-4"></div>
                <h3 class="gradient-text">WindexsAI –¥—É–º–∞–µ—Ç...</h3>
                <p class="text-muted">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
            </div>
        </div>
        </div>
        </div>
    </div>


    <!-- Connect Modal -->
    <div id="connect-modal" class="connect-modal hidden">
        <div class="connect-modal-content card">
            <div class="card-header">
                <div class="d-flex align-items-center justify-content-between">
                    <h2 class="mb-0">‚òÅÔ∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±–ª–∞–∫—É</h2>
                    <button class="close-connect btn btn-outline" title="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-4">
                    <p class="text-muted mb-3">–í–≤–µ–¥–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±–ª–∞—á–Ω–æ–º—É —Å–µ—Ä–≤–∏—Å—É:</p>
                    <div class="form-group mb-3">
                        <label for="connection-username" class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input
                            type="text"
                            id="connection-username"
                            class="form-control"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..."
                            value="admin"
                        >
                    </div>
                    <div class="form-group">
                        <label for="connection-password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                        <input
                            type="password"
                            id="connection-password"
                            class="form-control"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å..."
                            value="admin123"
                        >
                    </div>
                    <div class="mt-3">
                        <p class="text-muted small mb-2">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –æ–±–ª–∞–∫–µ?</p>
                        <a href="https://cloud.windexai.com/register" target="_blank" class="btn btn-outline btn-sm">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-1">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                            </svg>
                            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –æ–±–ª–∞–∫–µ
                        </a>
                    </div>
                </div>

                <div class="connection-status mb-4" id="connection-status" style="display: none;">
                    <div class="alert alert-info">
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                            <span>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</span>
                        </div>
                    </div>
                </div>

                <div class="connection-result mb-4" id="connection-result" style="display: none;">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
                </div>

                <div class="d-flex gap-3">
                    <button id="test-connection-btn" class="btn btn-primary flex-fill">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22,4 12,14.01 9,11.01"></polyline>
                        </svg>
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±–ª–∞–∫—É
                    </button>
                    <button id="connect-btn-modal" class="btn btn-success flex-fill" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                        </svg>
                        –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –æ–±–ª–∞–∫—É
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Agreement Modal -->
    <div id="agreement-modal" class="modal hidden">
      <div class="modal-overlay" id="agreement-overlay"></div>
      <div class="modal-content">
        <button class="modal-close" id="agreement-close">&times;</button>
        <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</h2>
        <div class="modal-body">
          <p>1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</p>
          <p>–ù–∞—Å—Ç–æ—è—â–µ–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ (–¥–∞–ª–µ–µ ‚Äì –°–æ–≥–ª–∞—à–µ–Ω–∏–µ) —è–≤–ª—è–µ—Ç—Å—è –¥–æ–≥–æ–≤–æ—Ä–æ–º –º–µ–∂–¥—É –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∫–æ–º–ø–∞–Ω–∏–µ–π-–≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Å–µ—Ä–≤–∏—Å–∞ WIndexsAI (–¥–∞–ª–µ–µ ‚Äì –°–µ—Ä–≤–∏—Å). –ò—Å–ø–æ–ª—å–∑—É—è –°–µ—Ä–≤–∏—Å, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ —ç—Ç–æ–≥–æ –°–æ–≥–ª–∞—à–µ–Ω–∏—è.</p>
          <p>2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</p>
          <p>¬´–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å¬ª ‚Äì —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ –°–µ—Ä–≤–∏—Å. ¬´–ö–æ–Ω—Ç–µ–Ω—Ç¬ª ‚Äì –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Ä–∞–∑–º–µ—â–∞–µ–º–∞—è –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è —á–µ—Ä–µ–∑ –°–µ—Ä–≤–∏—Å.</p>
          <p>3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–∫–∫–∞—É–Ω—Ç</p>
          <p>–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –°–µ—Ä–≤–∏—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –í—ã –Ω–µ—Å–µ—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è –∏ –æ–±—è–∑—É–µ—Ç–µ—Å—å –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.</p>
          <p>4. –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
          <ul>
            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ø—Ä–∞–≤–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –°–µ—Ä–≤–∏—Å –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É.</li>
            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—è–∑—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –°–µ—Ä–≤–∏—Å –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ –∏ –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–µ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ.</li>
          </ul>
          <p>5. –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</p>
          <ul>
            <li>–ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏—Ä—É—Å–æ–≤, —Å–ø–∞–º–∞, —Ñ–∏—à–∏–Ω–≥–∞ –∏ –¥—Ä—É–≥–∏—Ö –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.</li>
            <li>–ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∞–≤–∞ —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü, –≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∏ –ø—Ä–∞–≤–æ –Ω–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å.</li>
          </ul>
          <p>6. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</p>
          <p>–í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–¥, –¥–∏–∑–∞–π–Ω –∏ –∫–æ–Ω—Ç–µ–Ω—Ç, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–π –°–µ—Ä–≤–∏—Å–æ–º, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –µ–≥–æ –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è–º. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ª–∏—à—å –Ω–µ–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</p>
          <p>7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
          <p>–°–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏, –¥–æ—Å—Ç—É–ø–Ω–æ–π –Ω–∞ —Å–∞–π—Ç–µ.</p>
          <p>8. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ—Ä–æ–Ω</p>
          <p>–°–µ—Ä–≤–∏—Å –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–±–æ–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å.</p>
          <p>9. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π</p>
          <p>–°–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –°–æ–≥–ª–∞—à–µ–Ω–∏—è. –û–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω –Ω–∞ —Å–∞–π—Ç–µ –∏–ª–∏ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–µ.</p>
          <p>10. –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</p>
          <p>–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ –º–æ–º–µ–Ω—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –°–µ—Ä–≤–∏—Å–∞.</p>
          <p>11. –ü—Ä–∏–º–µ–Ω–∏–º–æ–µ –ø—Ä–∞–≤–æ –∏ —é—Ä–∏—Å–¥–∏–∫—Ü–∏—è</p>
          <p>–ù–∞—Å—Ç–æ—è—â–µ–µ –°–æ–≥–ª–∞—à–µ–Ω–∏–µ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏-–≤–ª–∞–¥–µ–ª—å—Ü–∞ –°–µ—Ä–≤–∏—Å–∞. –í—Å–µ —Å–ø–æ—Ä—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –≤ —Å—É–¥–µ –ø–æ –º–µ—Å—Ç—É –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è.</p>
          <p>12. –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</p>
          <p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å: support@windexsai.com.</p>
        </div>
      </div>
    </div>

    <script src="/static/script.js?v=20251027-14"></script>
    <script src="/static/cloud-api.js"></script>

    <!-- KaTeX –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- Mermaid.js –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.esm.min.mjs';

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Inter, sans-serif',
            fontSize: 14,
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–∏–∞–≥—Ä–∞–º–º
        window.renderDiagrams = async function() {
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã
            const mermaidElements = document.querySelectorAll('.mermaid');
            for (const element of mermaidElements) {
                if (element.getAttribute('data-processed') === 'true') continue;

                try {
                    const id = 'mermaid-' + Math.random().toString(36).substr(2, 9);
                    element.id = id;
                    element.setAttribute('data-processed', 'true');

                    const { svg } = await mermaid.render(id, element.textContent);
                    element.innerHTML = svg;
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã:', error);
                    element.innerHTML = '<div class="mermaid-error">–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –¥–∏–∞–≥—Ä–∞–º–º—ã Mermaid</div>';
                }
            }

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (ASCII art)
            const textDiagrams = document.querySelectorAll('.diagram-content');
            for (const element of textDiagrams) {
                if (element.getAttribute('data-processed') === 'true') continue;

                try {
                    element.setAttribute('data-processed', 'true');
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä–∞—Å–∏–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∏–∞–≥—Ä–∞–º–º
                    element.style.fontFamily = 'JetBrains Mono, Fira Code, Monaco, Courier New, monospace';
                    element.style.lineHeight = '1.5';
                    element.style.letterSpacing = '0.5px';
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã:', error);
                }
            }
        };

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                window.renderDiagrams();
            }, 100);
        });

        // MutationObserver –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList') {
                    setTimeout(() => {
                        window.renderDiagrams();
                    }, 100);
                }
            });
        });

        observer.observe(document.getElementById('chat-messages'), {
            childList: true,
            subtree: true
        });
    </script>

    <!-- KaTeX –∞–≤—Ç–æ-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false,
                errorColor: '#cc0000',
                strict: 'warn',
                trust: true
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        function renderMathInChat() {
            const chatMessages = document.getElementById('chat-messages');
            if (chatMessages && typeof renderMathInElement !== 'undefined') {
                renderMathInElement(chatMessages, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false},
                        {left: "\\[", right: "\\]", display: true},
                        {left: "\\(", right: "\\)", display: false}
                    ],
                    throwOnError: false,
                    errorColor: '#cc0000',
                    strict: 'warn',
                    trust: true
                });
            }
        }
    </script>
</body>
</html>
